<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sdtm.oak">
<title>Algorithms &amp; Sub-Algorithms • sdtm.oak</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Algorithms &amp; Sub-Algorithms">
<meta property="og:description" content="sdtm.oak">
<meta property="og:image" content="https://pharmaverse.github.io/sdtm.oak/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sdtm.oak</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9005</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/algorithms.html">Algorithms &amp; Sub-Algorithms</a>
    <a class="dropdown-item" href="../articles/cnd_df.html">Conditioned Data Frames</a>
    <a class="dropdown-item" href="../articles/events_domain.html">Creating an Events SDTM domain</a>
    <a class="dropdown-item" href="../articles/findings_domain.html">Creating an Findings SDTM domain</a>
    <a class="dropdown-item" href="../articles/iso_8601.html">Converting dates, times or date-times to ISO 8601</a>
    <a class="dropdown-item" href="../articles/study_sdtm_spec.html">All about Metadata</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/sdtm.oak/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Algorithms &amp; Sub-Algorithms</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/sdtm.oak/blob/HEAD/vignettes/articles/algorithms.Rmd" class="external-link"><code>vignettes/articles/algorithms.Rmd</code></a></small>
      <div class="d-none name"><code>algorithms.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="core-concept">Core Concept<a class="anchor" aria-label="anchor" href="#core-concept"></a>
</h2>
<p>SDTM mappings are defined as algorithms that transform the collected
(eCRF, eDT) source data into the target SDTM data model. Mapping
algorithms are the backbone of the {sdtm.oak} - SDTM data transformation
engine.</p>
<p><strong>Key Points:</strong></p>
<ul>
<li><p>Algorithms can be re-used across multiple SDTM domains.</p></li>
<li><p>Algorithms are pre-specified for data collection standards in MDR
(if applicable) to facilitate automation.</p></li>
<li><p>Programming language agnostic - this concept does not rely on a
specific programming language for implementation. The {sdtm.oak} team
implemented them as R functions.</p></li>
</ul>
<p>Here is an example of reusing an algorithm across multiple domains,
variables, and also to a non-standard</p>
<p><img src="reusable_algorithms.jpg" width="600"></p>
</div>
<div class="section level2">
<h2 id="list-of-algorithms">List of Algorithms<a class="anchor" aria-label="anchor" href="#list-of-algorithms"></a>
</h2>
<p>This release of {sdtm.oak} supports the following algorithms:
assign_no_ct, assign_ct, hardcode_no_ct, hardcode_ct, assign_datetime,
condition_add. Rest of the algorithms will be developed in the
subsequent releases.</p>
<p>The following table provides a brief description of each
algorithm.</p>
<table class="table">
<colgroup>
<col width="2%">
<col width="66%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th align="left">Algorithm.Name</th>
<th align="left">Description</th>
<th align="left">Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">assign_no_ct</td>
<td align="left">One-to-one mapping between the raw source and a target
SDTM variable that has no controlled terminology restrictions. Just a
simple assignment statement.</td>
<td align="left">MH.MHTERM<br> AE.AETERM</td>
</tr>
<tr class="even">
<td align="left">assign_ct</td>
<td align="left">One-to-one mapping between the raw source and a target
SDTM variable that is subject to controlled terminology restrictions. A
simple assign statement and applying controlled terminology. This will
be used only if the SDTM variable has an associated controlled
terminology.</td>
<td align="left">VS.VSPOS<br> VS.VSLAT</td>
</tr>
<tr class="odd">
<td align="left">assign_datetime</td>
<td align="left">One-to-one mapping between the raw source and a target
that involves mapping a Date or time or datetime component. This mapping
algorithm also takes care of handling unknown dates and converting them
into. ISO8601 format.</td>
<td align="left">MH.MHSTDTC<br> AE.AEENDTC</td>
</tr>
<tr class="even">
<td align="left">hardcode_ct</td>
<td align="left">Mapping a hardcoded value to a target SDTM variable
that is subject to terminology restrictions. This will be used only if
the SDTM variable has an associated controlled terminology.</td>
<td align="left">MH.MHPRESP = ‘Y’<br><br>VS.VSTEST = ‘Systolic Blood
Pressure’<br><br>VS.VSORRESU = ‘mmHg’<br>
</td>
</tr>
<tr class="odd">
<td align="left">hardcode_no_ct</td>
<td align="left">Mapping a hardcoded value to a target SDTM variable
that has no terminology restrictions.</td>
<td align="left">FA.FASCAT = ‘COVID-19 PROBABLE CASE’<br><br>CM.CMTRT =
‘FLUIDS’</td>
</tr>
<tr class="even">
<td align="left">condition_add</td>
<td align="left">Algorithm that is used to filter the source data and/or
target domain based on a condition. The mapping will be applied only if
the condition is met. The filter can be applied either at the source
dataset or at target dataset or both. This algorithm has to be used in
conjunction with other algorithms, that is if the condition is met
perform the mapping using algorithms like assign_ct, assign_no_ct,
hardcode_ct, hardcode_no_ct, assign_datetime.</td>
<td align="left">If If MDPRIOR == 1 then CM.CMSTRTPT = ‘BEFORE’.<br><br>VS.VSMETHOD when VSTESTCD = ‘TEMP’<br><br>If collected value in raw
variable DOS is numeric then CM.CMDOSE<br><br>If collected value in raw
variable MOD is different to CMTRT then map to CM.CMMODIFY</td>
</tr>
<tr class="odd">
<td align="left">ae_aerel</td>
<td align="left">Algorithm that is currently unique to AE.AEREL,
particularly when more than one drug is used in the study.<br> If any
collected study drug causalities are ‘Yes’ then AE.AEREL is Y. <br>If
all collected study drug causalities are ‘NA’ then AE.AEREL is NA.
<br>If no study drug causalities are ‘Yes’ but there is at least one
causality of ‘No’ then AE.AEREL is N. <br>Individual study drug
causality responses are stored in AERELn in SUPPAE.</td>
<td align="left">For AE.AEREL and AERELn in SUPPAE</td>
</tr>
<tr class="even">
<td align="left">dataset_level</td>
<td align="left">Indicates a dataset-level mapping. These mappings will
be applied to all SDTM records created from that source. Also called an
eCRF-level mappings in eCRF and dataset-level mappings in eDT</td>
<td align="left">VS = ‘Vital Signs’<br><br>MH.MHCAT = ‘PROSTATE CANCER
HISTORY’<br>
</td>
</tr>
<tr class="odd">
<td align="left">not_submitted</td>
<td align="left">Instruction that <a href="https://pharmaverse.github.io/sdtm.oak/">sdtm.oak</a> should not map
the collected item to SDTM at all.</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">relrec</td>
<td align="left">Associate two domains based on the variables in each
domain and how those are related. Specifies the name of two domains that
are related via RELREC.</td>
<td align="left">BE record related to BS record via RELREC</td>
</tr>
<tr class="odd">
<td align="left">multiple_responses</td>
<td align="left">Consolidate the responses from more than one source
variable into one target variable. Used when multiple responses may be
given for a single SDTM column. <a href="https://pharmaverse.github.io/sdtm.oak/">sdtm.oak</a> will populate
all target variable(s) after determining the number of responses
provided.</td>
<td align="left">AE.AERELNST/ AERELNSn IN SUPPAE<br><br><br>DM.RACE,
if only one value is selected.<br> DM.RACE = MULTIPLE, if more than one
value is selected.<br> RACEn in SUPPDM where n = 1 to N selected
values</td>
</tr>
<tr class="even">
<td align="left">split_to_suppqual</td>
<td align="left">Consolidates the responses from more than one source
variable into more than one target variable (always a
suppqual/non-standard variable). There is no ‘parent’ target variable
that is populated with ‘MULTIPLE’.</td>
<td align="left">If both Filipino and Samoan are checked, CRACE1 will be
‘FILIPINO’ and CRACE2 will be ‘SAMOAN’.<br> If only Chinese is checked,
CRACE1 will be ‘CHINESE’.</td>
</tr>
<tr class="odd">
<td align="left">remove_dup</td>
<td align="left">Sub-algorithm at the domain level that indicates some
source records may be removed during the <a href="https://pharmaverse.github.io/sdtm.oak/">sdtm.oak</a> mapping
process if determined to be duplicate records.</td>
<td align="left">Remove duplicates on the Vital signs raw dataset based
on subject number</td>
</tr>
<tr class="even">
<td align="left">group_by</td>
<td align="left">Sub-algorithm used at the domain level to group source
records before mapping to SDTM. This is used in the event we need to
collapse data collected across multiple rows into one row in SDTM but it
is not a simple un-duplication effort. For example, the way infusion
study drug administration data requires us to create 1 SDTM record in EC
from 1 or more sources records. When there is more than one source
record, we need to take the earliest collected infusion start date (for
ECSTDTC) and the latest collected infusion end date within an eCRF
instance.</td>
<td align="left">EC = ‘Exposure as Collected’</td>
</tr>
<tr class="odd">
<td align="left">merge_datasets</td>
<td align="left">To indicate a join condition with a secondary source or
multiple sources. Merges are expressed at the domain level only (not at
data point or variable level). This is a sub-algorithm and can only be
used with algorithm DATASET_LEVEL.</td>
<td align="left">Merge AE raw dataset with SAE based on Subject
number.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="sub-algorithms">Sub-algorithms<a class="anchor" aria-label="anchor" href="#sub-algorithms"></a>
</h2>
<p>{sdtm.oak} supports two levels for defining algorithms. For example,
there are some SDTM mappings where a certain action has to be taken only
when a condition is met. In such cases, the primary algorithm checks for
the condition, and the sub-algorithm executes the mappings when the
condition is met.</p>
<p>Currently, sub-algorithms must be provided for this main
algorithms.</p>
<ul>
<li>condition_add</li>
<li>dataset_level</li>
</ul>
<p>Some algorithms can be interchangeably used as algorithms and as
sub-algorithms as seen below (not an exhaustive list)</p>
<p><img src="algo_sub_algo_combo.jpg" width="650"></p>
<p>The permutation &amp; combination of algorithms &amp; sub-algorithms
creates endless possibilities to accommodate different types of
mappings.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rammprasad Ganapathy, Adam Forys, Edgar Manukyan, Rosemary Li, Preetesh Parikh, Lisa Houterloot, Yogesh Gupta, Omar Garcia, Ramiro Magno, Pattern Institute, F. Hoffmann-La Roche AG, Pfizer Inc.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
