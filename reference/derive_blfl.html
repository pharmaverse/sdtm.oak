<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Derive the baseline flag variable (--BLFL) or the last observation before
exposure flag (--LOBXFL), from the observation date/time (--DTC), and a
DM domain reference date/time."><title>Derive Baseline Flag or Last Observation Before Exposure Flag — derive_blfl • sdtm.oak</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Derive Baseline Flag or Last Observation Before Exposure Flag — derive_blfl"><meta property="og:description" content="Derive the baseline flag variable (--BLFL) or the last observation before
exposure flag (--LOBXFL), from the observation date/time (--DTC), and a
DM domain reference date/time."><meta property="og:image" content="https://pharmaverse.github.io/sdtm.oak/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sdtm.oak</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/algorithms.html">Algorithms &amp; Sub-Algorithms</a>
    <a class="dropdown-item" href="../articles/cnd_df.html">Conditioned Data Frames</a>
    <a class="dropdown-item" href="../articles/findings_domain.html">Creating an Findings SDTM domain</a>
    <a class="dropdown-item" href="../articles/interventions_domain.html">Creating an Interventions SDTM domain</a>
    <a class="dropdown-item" href="../articles/iso_8601.html">Converting dates, times or date-times to ISO 8601</a>
    <a class="dropdown-item" href="../articles/study_sdtm_spec.html">Path to Automation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/sdtm.oak/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Derive Baseline Flag or Last Observation Before Exposure Flag</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/sdtm.oak/blob/HEAD/R/derive_blfl.R" class="external-link"><code>R/derive_blfl.R</code></a></small>
      <div class="d-none name"><code>derive_blfl.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Derive the baseline flag variable (<code>--BLFL</code>) or the last observation before
exposure flag (<code>--LOBXFL</code>), from the observation date/time (<code>--DTC</code>), and a
DM domain reference date/time.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">derive_blfl</span><span class="op">(</span></span>
<span>  <span class="va">sdtm_in</span>,</span>
<span>  <span class="va">dm_domain</span>,</span>
<span>  <span class="va">tgt_var</span>,</span>
<span>  <span class="va">ref_var</span>,</span>
<span>  baseline_visits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  baseline_timepoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>sdtm_in</dt>
<dd><p>Input SDTM domain.</p></dd>


<dt>dm_domain</dt>
<dd><p>DM domain with the reference variable <code>ref_var</code></p></dd>


<dt>tgt_var</dt>
<dd><p>Name of variable to be derived (<code>--BLFL</code> or
<code>--LOBXFL</code> where <code>--</code> is domain).</p></dd>


<dt>ref_var</dt>
<dd><p>vector of a date/time from the
Demographics (DM) dataset, which serves as a point of comparison for other
observations in the study. Common choices for this reference variable
include "RFSTDTC" (the date/time of the first study treatment) or
"RFXSTDTC" (the date/time of the first exposure to the study drug).</p></dd>


<dt>baseline_visits</dt>
<dd><p>A character vector specifying the baseline visits within the study.
These visits are identified as critical points for data collection at the start of the study,
before any intervention is applied.  This allows the function to assign the baseline
flag if the --DTC matches to the reference date.</p></dd>


<dt>baseline_timepoints</dt>
<dd><p>A character vector of timepoints values in --TPT that specifies
the specific timepoints during the baseline visits when key assessments or measurements were taken.
This allows the function to assign the baseline flag if the --DTC matches to the reference date.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Modified input data frame with baseline flag variable <code>--BLFL</code> or
last observation before exposure flag <code>--LOBXFL</code> added.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The derivation is as follows:</p><ul><li><p>Remove records where the result (<code>--ORRES</code>) is missing. Also, exclude records
with results labeled as "ND" (No Data) or "NOT DONE" in the <code>--ORRES</code> column,
which indicate that the measurement or observation was not completed.</p></li>
<li><p>Remove records where the status (<code>--STAT</code>) indicates the observation or test
was not performed, marked as "NOT DONE".</p></li>
<li><p>Divide the date and time column (<code>--DTC</code>) and the reference date/time
variable (<code>ref_var</code>) into separate date and time components. Ignore
any seconds recorded in the time component, focusing only on hours and
minutes for further calculations.</p></li>
<li><p>Set partial or missing dates to <code>NA</code>.</p></li>
<li><p>Set partial or missing times to <code>NA</code>.</p></li>
<li><p>Filter on rows that have domain and reference dates not equal to
<code>NA</code>. (Ref to as <strong>X</strong>)</p></li>
<li><p>Filter <strong>X</strong> on rows with domain date (--DTC) prior to (less than)
reference date. (Ref to as <strong>A</strong>)</p></li>
<li><p>Filter <strong>X</strong> on rows with domain date (--DTC) equal to reference date but
domain and reference times not equal to <code>NA</code> and domain time prior to (less
than) reference time. (Ref to as <strong>B</strong>)</p></li>
<li><p>Filter <strong>X</strong> on rows with domain date (--DTC) equal to reference date but
domain and/or reference time equal to NA and:</p><ul><li><p>VISIT is in baseline visits list (if it exists) and</p></li>
<li><p>xxTPT is in baseline timepoints list (if it exists).
(Ref to as <strong>C</strong>)</p></li>
</ul></li>
<li><p>Combine the rows from <strong>A</strong>, <strong>B</strong>, and <strong>C</strong> to get a
data frame of pre-reference date observations. Sort the rows by <code>USUBJID</code>,
<code>--STAT</code>, and <code>--ORRES</code>.</p></li>
<li><p>Group by <code>USUBJID</code> and <code>--TESTCD</code> and filter on the rows
that have maximum value from <code>--DTC</code>. Keep only the oak id variables and
<code>--TESTCD</code> (because these are the unique values). Remove any duplicate rows.
Assign the baseline flag variable, <code>--BLFL</code>, the last observation before
exposure flag (<code>--LOBXFL</code>) variable to these rows.</p></li>
<li><p>Join the baseline flag onto the input dataset based on oak id vars</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dm</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">RFSTDTC</span>, <span class="op">~</span><span class="va">RFXSTDTC</span>,</span></span>
<span class="r-in"><span>  <span class="st">"test_study-375"</span>, <span class="st">"2020-09-28T10:10"</span>, <span class="st">"2020-09-28T10:10"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"test_study-376"</span>, <span class="st">"2020-09-21T11:00"</span>, <span class="st">"2020-09-21T11:00"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"test_study-377"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>  <span class="st">"test_study-378"</span>, <span class="st">"2020-01-20T10:00"</span>, <span class="st">"2020-01-20T10:00"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"test_study-379"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dm</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID        RFSTDTC          RFXSTDTC        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> test_study-375 2020-09-28T10:10 2020-09-28T10:10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> test_study-376 2020-09-21T11:00 2020-09-21T11:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> test_study-377 <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> test_study-378 2020-01-20T10:00 2020-01-20T10:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> test_study-379 <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>              </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sdtm_in</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">DOMAIN</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">oak_id</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">raw_source</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">patient_number</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">USUBJID</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">VSDTC</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">VSTESTCD</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">VSORRES</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">VSSTAT</span>,</span></span>
<span class="r-in"><span>    <span class="op">~</span><span class="va">VISIT</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">1L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">375L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-375"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-09-01T13:31"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"DIABP"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"90"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">2L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">375L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-375"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-10-01T11:20"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"DIABP"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"90"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">1L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">375L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-375"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-09-28T10:10"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"PULSE"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"ND"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">2L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">375L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-375"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-10-01T13:31"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"PULSE"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"85"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">1L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS2"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">375L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-375"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-09-28T10:10"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SYSBP"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"120"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">2L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS2"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">375L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-375"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-09-28T10:05"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SYSBP"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"120"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">1L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">376L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-376"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-09-20"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"DIABP"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"75"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">1L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">376L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-376"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-09-20"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"PULSE"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"NOT DONE"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">2L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">376L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-376"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-09-20"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"PULSE"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"110"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">2L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">378L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-378"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-01-20T10:00"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"PULSE"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"110"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VS"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">3L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"VTLS1"</span>,</span></span>
<span class="r-in"><span>    <span class="fl">378L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"test_study-378"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"2020-01-21T11:00"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"PULSE"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"105"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="st">"SCREENING"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sdtm_in</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11 × 10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DOMAIN oak_id raw_source patient_number USUBJID VSDTC VSTESTCD VSORRES VSSTAT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> VS          1 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> VS          2 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> VS          1 VTLS1                 375 test_s… 2020… PULSE    ND      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> VS          2 VTLS1                 375 test_s… 2020… PULSE    85      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> VS          1 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> VS          2 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> VS          1 VTLS1                 376 test_s… 2020… DIABP    75      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> VS          1 VTLS1                 376 test_s… 2020… PULSE    <span style="color: #BB0000;">NA</span>      NOT D…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> VS          2 VTLS1                 376 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> VS          2 VTLS1                 378 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> VS          3 VTLS1                 378 test_s… 2020… PULSE    105     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: VISIT &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1:</span></span></span>
<span class="r-in"><span><span class="va">observed_output</span> <span class="op">&lt;-</span> <span class="fu">derive_blfl</span><span class="op">(</span></span></span>
<span class="r-in"><span>  sdtm_in <span class="op">=</span> <span class="va">sdtm_in</span>,</span></span>
<span class="r-in"><span>  dm_domain <span class="op">=</span> <span class="va">dm</span>,</span></span>
<span class="r-in"><span>  tgt_var <span class="op">=</span> <span class="st">"VSLOBXFL"</span>,</span></span>
<span class="r-in"><span>  ref_var <span class="op">=</span> <span class="st">"RFXSTDTC"</span>,</span></span>
<span class="r-in"><span>  baseline_visits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SCREENING"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">observed_output</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DOMAIN oak_id raw_source patient_number USUBJID VSDTC VSTESTCD VSORRES VSSTAT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> VS          1 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> VS          2 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> VS          1 VTLS1                 375 test_s… 2020… PULSE    ND      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> VS          2 VTLS1                 375 test_s… 2020… PULSE    85      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> VS          1 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> VS          2 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> VS          1 VTLS1                 376 test_s… 2020… DIABP    75      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> VS          1 VTLS1                 376 test_s… 2020… PULSE    <span style="color: #BB0000;">NA</span>      NOT D…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> VS          2 VTLS1                 376 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> VS          2 VTLS1                 378 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> VS          3 VTLS1                 378 test_s… 2020… PULSE    105     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: VISIT &lt;chr&gt;, VSLOBXFL &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2:</span></span></span>
<span class="r-in"><span><span class="va">observed_output2</span> <span class="op">&lt;-</span> <span class="fu">derive_blfl</span><span class="op">(</span></span></span>
<span class="r-in"><span>  sdtm_in <span class="op">=</span> <span class="va">sdtm_in</span>,</span></span>
<span class="r-in"><span>  dm_domain <span class="op">=</span> <span class="va">dm</span>,</span></span>
<span class="r-in"><span>  tgt_var <span class="op">=</span> <span class="st">"VSLOBXFL"</span>,</span></span>
<span class="r-in"><span>  ref_var <span class="op">=</span> <span class="st">"RFXSTDTC"</span>,</span></span>
<span class="r-in"><span>  baseline_timepoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PRE-DOSE"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">observed_output2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DOMAIN oak_id raw_source patient_number USUBJID VSDTC VSTESTCD VSORRES VSSTAT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> VS          1 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> VS          2 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> VS          1 VTLS1                 375 test_s… 2020… PULSE    ND      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> VS          2 VTLS1                 375 test_s… 2020… PULSE    85      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> VS          1 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> VS          2 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> VS          1 VTLS1                 376 test_s… 2020… DIABP    75      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> VS          1 VTLS1                 376 test_s… 2020… PULSE    <span style="color: #BB0000;">NA</span>      NOT D…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> VS          2 VTLS1                 376 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> VS          2 VTLS1                 378 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> VS          3 VTLS1                 378 test_s… 2020… PULSE    105     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: VISIT &lt;chr&gt;, VSLOBXFL &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Output is the same as Example 2</span></span></span>
<span class="r-in"><span><span class="va">observed_output3</span> <span class="op">&lt;-</span> <span class="fu">derive_blfl</span><span class="op">(</span></span></span>
<span class="r-in"><span>  sdtm_in <span class="op">=</span> <span class="va">sdtm_in</span>,</span></span>
<span class="r-in"><span>  dm_domain <span class="op">=</span> <span class="va">dm</span>,</span></span>
<span class="r-in"><span>  tgt_var <span class="op">=</span> <span class="st">"VSLOBXFL"</span>,</span></span>
<span class="r-in"><span>  ref_var <span class="op">=</span> <span class="st">"RFXSTDTC"</span>,</span></span>
<span class="r-in"><span>  baseline_visits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SCREENING"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  baseline_timepoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PRE-DOSE"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">observed_output3</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DOMAIN oak_id raw_source patient_number USUBJID VSDTC VSTESTCD VSORRES VSSTAT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> VS          1 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> VS          2 VTLS1                 375 test_s… 2020… DIABP    90      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> VS          1 VTLS1                 375 test_s… 2020… PULSE    ND      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> VS          2 VTLS1                 375 test_s… 2020… PULSE    85      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> VS          1 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> VS          2 VTLS2                 375 test_s… 2020… SYSBP    120     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> VS          1 VTLS1                 376 test_s… 2020… DIABP    75      <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> VS          1 VTLS1                 376 test_s… 2020… PULSE    <span style="color: #BB0000;">NA</span>      NOT D…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> VS          2 VTLS1                 376 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> VS          2 VTLS1                 378 test_s… 2020… PULSE    110     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> VS          3 VTLS1                 378 test_s… 2020… PULSE    105     <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: VISIT &lt;chr&gt;, VSLOBXFL &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rammprasad Ganapathy, Adam Forys, <a href="https://www.linkedin.com/in/edgar-manukyan-20987927" class="external-link">Edgar Manukyan</a>, Rosemary Li, Preetesh Parikh, Lisa Houterloot, Yogesh Gupta, Omar Garcia, <a href="https://www.pattern.institute/team/rmagno/" class="external-link">Ramiro Magno</a>, Kamil Sijko, <a href="https://www.linkedin.com/in/shiyu-chen-55a55410a/" class="external-link">Shiyu Chen</a>, <a href="https://www.pattern.institute" class="external-link">Pattern Institute</a>, F. Hoffmann-La Roche AG, Pfizer Inc, <a href="https://www.linkedin.com/in/mohsin-uzzama-34066741/" class="external-link">Mohsin Uzzama</a>, Transition Technologies Science.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

